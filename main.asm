; ASM TEMPLATE
; ENZO PATERNO
; 4/29/2013

#include <p16f887.inc>

	ORG 0
	NOP
	GOTO main
	ORG 4
	GOTO isr
main:
	ORG 0x06
	BANKSEL TRISB
	CLRF TRISB
	BANKSEL ANSEL

	BANKSEL PORTB
	CLRF PORTB
loop:
	MOVF PORTD,0
	MOVWF HOLD
	XORWF PREV,0
	MOVWF COMP
	BTFSC COMP, 0
		GOTO check
back:
	MOVF HOLD, 0
	MOVWF PREV
	GOTO loop

check:
	INCF COUNT
	BTFSC COUNT,0
		COMF PORTD
	MOVF PORTD, 0
	MOVWF HOLD
	GOTO back

isr:
	NOP
	RETFIE

	END